<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>MZK RPG - ELITE 2026</title>
    <style>
        :root { --primary: #ff2b2b; --bg: #0a0a0a; --gold: #ffd700; --coin: #ff9900; --blue: #0088ff; }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body { margin: 0; background: var(--bg); color: #fff; font-family: sans-serif; padding: 15px; padding-bottom: 50px; }
        .card { background: linear-gradient(145deg, #1a0000, #250000); border: 1px solid #330000; border-radius: 12px; padding: 15px; margin-bottom: 12px; }
        h2 { font-size: 0.8rem; color: var(--primary); text-transform: uppercase; margin: 20px 0 10px; border-left: 3px solid var(--primary); padding-left: 10px; }
        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
        button { background: var(--primary); color: #fff; border: none; padding: 12px; border-radius: 8px; font-weight: bold; cursor: pointer; width: 100%; }
        button:disabled { background: #222; color: #555; }
        .bar-bg { background: #000; height: 12px; border-radius: 6px; overflow: hidden; margin: 10px 0; border: 1px solid #333; }
        .bar-fill { height: 100%; background: var(--primary); width: 0%; transition: 0.5s; }
        .inventory-item { display: inline-block; background: #222; color: var(--gold); padding: 4px 8px; border-radius: 4px; font-size: 0.7rem; margin: 2px; border: 1px solid var(--gold); }
        .rank-row { display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid #222; font-size: 0.9rem; }
        .player-highlight { color: var(--primary); font-weight: bold; background: rgba(255,0,0,0.1); }
        .boss-card { border: 2px solid var(--primary); background: #000; display: none; }
        .history-text { font-size: 0.7rem; color: #888; margin-bottom: 4px; border-bottom: 1px solid #111; padding-bottom: 2px; }
        .chat-bot { color: var(--gold); font-style: italic; font-weight: bold; }
    </style>
</head>
<body onclick="initAudio()">

    <div style="text-align: center; margin-bottom: 20px;">
        <h1 style="color: var(--primary); margin: 0;">MZK <span style="color:#fff">ELITE</span></h1>
        <div id="rankBadge" style="font-size: 0.7rem; font-weight: bold; color: var(--gold);">PATENTE: CARREGANDO...</div>
    </div>

    <div class="card" style="text-align: center;">
        <div id="lvlDisplay" style="font-size: 2rem; font-weight: 900; color: var(--primary);">LVL 1</div>
        <div id="streakDisplay" style="font-size: 0.8rem; color: var(--gold); margin-bottom: 5px;">üî• Streak: 0 dias</div>
        <div class="bar-bg"><div id="xpBar" class="bar-fill"></div></div>
        <div style="display:flex; justify-content: space-between; font-size: 0.8rem;">
            <span>üí∞ <span id="coinCount">0</span> c</span>
            <span id="doubleXpTag" style="color:var(--gold); display:none;">‚ö° 2X XP ATIVO</span>
        </div>
    </div>

    <div id="bossArea" class="card boss-card">
        <h3 style="margin:0; font-size:0.8rem; color:var(--primary)">üëæ BOSS: A PREGUI√áA ABISSAL</h3>
        <div class="bar-bg"><div id="bossBar" class="bar-fill" style="background: red;"></div></div>
        <div id="bossHpText" style="font-size:0.7rem; text-align: center;">HP: 1000/1000</div>
    </div>

    <h2>üõí Mercado Negro & Banca do MT_</h2>
    <div class="card">
        <div class="grid">
            <button onclick="buyShop('xp', 150)" style="background:#333; font-size:0.7rem;">XP DOBRO (1h)<br>150c</button>
            <button onclick="buyShop('food', 500)" style="background:#333; font-size:0.7rem;">FAST FOOD<br>500c</button>
        </div>
        <div id="inventoryArea" style="margin-top:10px;"></div>
        <hr style="border:0; border-top:1px solid #333; margin:15px 0;">
        <button id="betBtn" onclick="toggleBet()" style="background:var(--gold); color:#000;">üé≤ APOSTAR 100c NO TREINO</button>
        <div id="betLabel" style="font-size:0.6rem; text-align:center; margin-top:5px; color:#888;">Nenhuma aposta ativa</div>
    </div>

    <h2>üåç Ranking Global</h2>
    <div class="card" id="rankingList"></div>

    <h2>üèãÔ∏è Miss√µes Di√°rias</h2>
    <div class="card">
        <select id="gymSelect" style="width:100%; padding:10px; background:#000; color:#fff; border:1px solid var(--primary); border-radius:5px; margin-bottom:10px;">
            <option value="Peito">Peito & Tr√≠ceps</option>
            <option value="Pernas">Pernas (Hardcore)</option>
            <option value="Boxe">ü•ä Sparring de Boxe</option>
        </select>
        <button id="gymBtn" onclick="doGym()">FINALIZAR TREINO DO DIA</button>
        <div class="grid" style="margin-top:10px;" id="mealArea"></div>
    </div>

    <div class="card">
        <h3 style="font-size:0.8rem; margin:0;">üíß Hidrata√ß√£o: <span id="waterText">0</span>/3000ml</h3>
        <div class="bar-bg"><div id="waterBar" class="bar-fill" style="background:var(--blue)"></div></div>
        <div class="grid">
            <button onclick="drink(250)" style="background:var(--blue)">+250ml</button>
            <button onclick="drink(1000)" style="background:var(--blue)">+1L</button>
        </div>
    </div>

    <h2>üìú Hist√≥rico & Provoca√ß√µes</h2>
    <div class="card" id="logArea"></div>

    <script>
        let audioCtx = null;
        function initAudio() { if(!audioCtx) audioCtx = new (window.AudioContext || window.webkitAudioContext)(); }

        // Estado Inicial
        let user = {
            xp: 0, lvl: 1, coins: 0, water: 0, streak: 0,
            tasks: { gym: false, meals: [] },
            inventory: [], betActive: false, doubleXp: false,
            lastDate: new Date().toLocaleDateString(),
            bossHp: 1000
        };

        let bots = [
            { name: "Pedrin MDM", lvl: 12, streak: 5 },
            { name: "Cosmin", lvl: 10, streak: 3 },
            { name: "Vitinn", lvl: 8, streak: 2 },
            { name: "Mt_", lvl: 6, streak: 10 }
        ];

        const botLines = {
            "Pedrin MDM": ["Fica parado e eu dobro o n√≠vel.", "Treino √© sagrado."],
            "Mt_": ["A banca sempre ganha!", "Fizeste a aposta ou tens medo?", "Essa moeda agora √© minha."],
            "Vitinn": ["Bebe √°gua, MZK!", "Foco no objetivo."]
        };

        // Salvar/Carregar
        function save() { localStorage.setItem('mzk_vfinal_fix', JSON.stringify(user)); }
        function load() {
            const data = localStorage.getItem('mzk_vfinal_fix');
            if(data) {
                const p = JSON.parse(data);
                const hoje = new Date().toLocaleDateString();
                if(p.lastDate !== hoje) {
                    // Mudan√ßa de dia
                    if(p.betActive && !p.tasks.gym) { addLog("MT_: 'Perbeste a aposta! 100c para mim.'", true); }
                    if(p.tasks.gym) p.streak++; else p.streak = 0;
                    p.tasks = { gym: false, meals: [] };
                    p.water = 0;
                    p.betActive = false;
                    p.lastDate = hoje;
                }
                user = p;
            }
            render();
        }

        function addXP(val, source) {
            let gain = user.doubleXp ? val * 2 : val;
            user.xp += gain;
            user.coins += 15;
            if(new Date().getDay() === 0) user.bossHp = Math.max(0, user.bossHp - gain);
            if(user.xp >= 100) { user.lvl++; user.xp = 0; addLog("‚≠ê N√çVEL AUMENTADO!"); }
            addLog(`+${gain}xp: ${source}`);
            save(); render();
        }

        function drink(v) { user.water = Math.min(3000, user.water + v); addXP(5, "√Ågua"); }

        function doGym() {
            if(!user.tasks.gym) {
                user.tasks.gym = true;
                if(user.betActive) { user.coins += 250; user.betActive = false; addLog("MT_: 'Pagamento da aposta feito.'", true); }
                addXP(50, "Treino " + document.getElementById('gymSelect').value);
            }
        }

        function toggleBet() {
            if(!user.betActive && user.coins >= 100) {
                user.coins -= 100;
                user.betActive = true;
                addLog("MT_: 'Aposta aceita. Treina ou perdes tudo!'", true);
                save(); render();
            }
        }

        function buyShop(type, cost) {
            if(user.coins >= cost) {
                user.coins -= cost;
                if(type === 'xp') {
                    user.doubleXp = true;
                    setTimeout(() => { user.doubleXp = false; render(); }, 3600000);
                    addLog("‚ö° XP DOBRO ATIVADO POR 1H");
                } else {
                    user.inventory.push(type === 'food' ? "üçî Fast Food" : "üíé Item");
                }
                save(); render();
            }
        }

        function addLog(txt, isBot = false) {
            const log = document.getElementById('logArea');
            const time = new Date().toLocaleTimeString().slice(0,5);
            log.innerHTML = `<div class="history-text ${isBot?'chat-bot':''}">${time} - ${txt}</div>` + log.innerHTML;
        }

        function updateBots() {
            bots.forEach(b => {
                if(Math.random() > 0.7) {
                    b.lvl++;
                    if(b.lvl >= user.lvl && botLines[b.name]) {
                        const msg = botLines[b.name][Math.floor(Math.random()*botLines[b.name].length)];
                        addLog(`${b.name}: "${msg}"`, true);
                    }
                }
            });
            render();
        }

        function render() {
            document.getElementById('lvlDisplay').innerText = `LVL ${user.lvl}`;
            document.getElementById('coinCount').innerText = user.coins;
            document.getElementById('xpBar').style.width = user.xp + "%";
            document.getElementById('waterBar').style.width = (user.water/3000)*100 + "%";
            document.getElementById('waterText').innerText = user.water;
            document.getElementById('streakDisplay').innerText = `üî• Streak: ${user.streak} dias`;
            document.getElementById('doubleXpTag').style.display = user.doubleXp ? 'block' : 'none';
            document.getElementById('gymBtn').disabled = user.tasks.gym;
            document.getElementById('betLabel').innerText = user.betActive ? "‚úÖ APOSTA ATIVA" : "NENHUMA APOSTA";

            // Boss
            const isSunday = new Date().getDay() === 0;
            document.getElementById('bossArea').style.display = isSunday ? 'block' : 'none';
            document.getElementById('bossBar').style.width = (user.bossHp/1000)*100 + "%";
            document.getElementById('bossHpText').innerText = `HP: ${user.bossHp}/1000`;

            // Inventory
            document.getElementById('inventoryArea').innerHTML = user.inventory.map(i => `<span class="inventory-item">${i}</span>`).join('');

            // Ranking
            let all = [...bots, {name: "VOC√ä", lvl: user.lvl, streak: user.streak, isPlayer: true}];
            all.sort((a,b) => b.lvl - a.lvl);
            document.getElementById('rankingList').innerHTML = all.map((p, i) => `
                <div class="rank-row ${p.isPlayer?'player-highlight':''}">
                    <span>${i+1}¬∫ ${p.name} ${p.streak>2?'üî•':''}</span>
                    <span>LVL ${p.lvl}</span>
                </div>
            `).join('');

            // Patente
            const r = user.lvl >= 50 ? "IMORTAL" : user.lvl >= 25 ? "PLATINA" : user.lvl >= 10 ? "OURO" : "BRONZE";
            document.getElementById('rankBadge').innerText = "PATENTE: " + r;
        }

        window.onload = load;
        setInterval(updateBots, 60000);
    </script>
</body>
</html>