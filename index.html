<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-mobile-web-app-title" content="MZK LIFE">
<title>MZK GAME LIFE 2026</title>

<style>
:root {
    --primary: #ff2b2b;
    --bg: #0a0a0a;
    --card-bg: linear-gradient(145deg, #1a0000, #250000);
}
* { -webkit-tap-highlight-color: transparent; box-sizing: border-box; }
body {
    margin: 0;
    padding: env(safe-area-inset-top) 15px env(safe-area-inset-bottom) 15px;
    background: var(--bg);
    color: #fff;
    font-family: -apple-system, system-ui, sans-serif;
    overflow-x: hidden;
}
#app { max-width: 500px; margin: 0 auto; padding-bottom: 40px; }
.banner-img { width: 100%; border-radius: 15px; border: 1px solid var(--primary); box-shadow: 0 0 20px rgba(255, 43, 43, 0.3); margin: 15px 0; }
h1 { font-size: 1.2rem; text-align: center; letter-spacing: 3px; color: var(--primary); text-transform: uppercase; margin: 10px 0; }
.level-card { background: var(--card-bg); border-radius: 12px; padding: 15px; text-align: center; border: 1px solid #330000; margin-bottom: 15px; }
.xp-label { font-size: 1.2rem; font-weight: 800; color: var(--primary); }
.task-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 15px; }
.card { background: var(--card-bg); padding: 15px; border-radius: 12px; border: 1px solid #330000; display: flex; flex-direction: column; justify-content: space-between; }
.full-card { grid-column: span 2; }
h3 { margin: 0 0 10px 0; font-size: 0.9rem; text-transform: uppercase; color: #ccc; }
button { background: var(--primary); color: white; border: none; padding: 12px 5px; border-radius: 8px; font-weight: bold; font-size: 0.8rem; cursor: pointer; transition: transform 0.1s; }
button:active { transform: scale(0.95); }
button:disabled { background: #333; color: #777; }
.bar-bg { background: #220000; height: 10px; border-radius: 5px; margin-top: 8px; overflow: hidden; }
.bar-fill { height: 100%; background: var(--primary); width: 0%; transition: width 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); box-shadow: 0 0 8px var(--primary); }
.medalha { display: inline-block; padding: 4px 8px; margin: 3px; background: #fff; color: #000; font-size: 0.7rem; font-weight: 900; border-radius: 4px; }
</style>
</head>
<body onclick="initAudio()">
<div id="app">
    <img src="mzk_banner.png" alt="MZK LOGO" class="banner-img">
    <h1>MZK GAME LIFE</h1>
    <div class="level-card">
        <div class="xp-label" id="levelTxt">LVL 1 - XP 0/100</div>
        <div class="bar-bg"><div id="xpBarFill" class="bar-fill"></div></div>
    </div>
    <div class="card full-card">
        <h3>üíß √Ågua (3L) <span id="waterVal" style="float:right">0ml</span></h3>
        <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 8px;">
            <button onclick="addWater(250)">+250</button>
            <button onclick="addWater(500)">+500</button>
            <button onclick="addWater(1000)">+1L</button>
        </div>
        <div class="bar-bg"><div id="waterBarFill" class="bar-fill" style="background: #0088ff; box-shadow: 0 0 8px #0088ff;"></div></div>
    </div>
    <div class="task-grid" id="mainTasks"></div>
    <h3>üçΩÔ∏è Dieta</h3>
    <div class="task-grid" id="mealGrid"></div>
    <div class="card full-card">
        <h3>üèÜ Conquistas</h3>
        <div id="medalsList"></div>
    </div>
</div>

<script>
let audioCtx = null;
let state = { water: 0, xp: 0, lvl: 1, tasks: { gym: false, box: false, tirzep: false, meals: {} }, date: new Date().toLocaleDateString(), medals: [] };
const meals = ["Caf√©", "Almo√ßo", "Lanche", "Jantar"];

// Inicializa √Åudio (Precisa de intera√ß√£o no iOS)
function initAudio() { if(!audioCtx) audioCtx = new (window.AudioContext || window.webkitAudioContext)(); }

function playSound(type) {
    if(!audioCtx) return;
    const osc = audioCtx.createOscillator();
    const gain = audioCtx.createGain();
    osc.connect(gain); gain.connect(audioCtx.destination);
    
    if(type === 'click') {
        osc.type = 'sine'; osc.frequency.setValueAtTime(400, audioCtx.currentTime);
        osc.frequency.exponentialRampToValueAtTime(10, audioCtx.currentTime + 0.1);
        gain.gain.setValueAtTime(0.1, audioCtx.currentTime);
        gain.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.1);
        osc.start(); osc.stop(audioCtx.currentTime + 0.1);
    } else if(type === 'lvl') {
        [523.25, 659.25, 783.99, 1046.50].forEach((f, i) => {
            const o = audioCtx.createOscillator(); const g = audioCtx.createGain();
            o.connect(g); g.connect(audioCtx.destination);
            o.type = 'square'; o.frequency.value = f;
            g.gain.setValueAtTime(0.05, audioCtx.currentTime + i*0.1);
            g.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + i*0.1 + 0.3);
            o.start(audioCtx.currentTime + i*0.1); o.stop(audioCtx.currentTime + i*0.1 + 0.3);
        });
    }
}

function save() { localStorage.setItem('mzk_v2', JSON.stringify(state)); }

function load() {
    const saved = localStorage.getItem('mzk_v2');
    if(saved) {
        const parsed = JSON.parse(saved);
        if(parsed.date === new Date().toLocaleDateString()) state = parsed;
        else { state.water = 0; state.tasks = { gym: false, box: false, tirzep: false, meals: {} }; state.date = new Date().toLocaleDateString(); }
    }
    render();
}

function addXP(amount) {
    state.xp += amount;
    playSound('click');
    if(state.xp >= 100) { 
        state.lvl++; state.xp = 0; 
        setTimeout(() => playSound('lvl'), 200); 
    }
    save(); render();
}

function addWater(v) { state.water = Math.min(state.water + v, 3000); addXP(5); }

function toggleTask(key, isMeal = false) {
    if(isMeal) { if(!state.tasks.meals[key]) { state.tasks.meals[key] = true; addXP(10); } }
    else { if(!state.tasks[key]) { state.tasks[key] = true; addXP(30); } }
    save(); render();
}

function render() {
    document.getElementById('levelTxt').innerText = `LVL ${state.lvl} - XP ${state.xp}/100`;
    document.getElementById('xpBarFill').style.width = `${state.xp}%`;
    document.getElementById('waterVal').innerText = `${state.water}ml`;
    document.getElementById('waterBarFill').style.width = `${(state.water/3000)*100}%`;

    const d = new Date().getDay();
    const isBoxe = [1,3,5].includes(d);
    document.getElementById('mainTasks').innerHTML = `
        <div class="card"><h3>${isBoxe?'ü•ä Boxe':'üèãÔ∏è Academia'}</h3><button onclick="toggleTask('${isBoxe?'box':'gym'}')" ${ (state.tasks.box || state.tasks.gym) ? 'disabled' : ''}>${(state.tasks.box || state.tasks.gym) ? 'FEITO ‚úî' : 'CONCLUIR'}</button></div>
        <div class="card"><h3>üíâ Tirzepatida</h3><button onclick="toggleTask('tirzep')" ${(d !== 5 || state.tasks.tirzep) ? 'disabled' : ''}>${state.tasks.tirzep ? 'OK' : (d===5?'APLICAR':'SEXTA')}</button></div>
    `;
    document.getElementById('mealGrid').innerHTML = meals.map(m => `<div class="card"><h3>${m}</h3><button onclick="toggleTask('${m}', true)" ${state.tasks.meals[m] ? 'disabled' : ''}>${state.tasks.meals[m] ? 'OK ‚úî' : 'FEITO'}</button></div>`).join('');
    
    if(state.water >= 3000 && !state.medals.includes("HIDRATADO")) state.medals.push("HIDRATADO");
    document.getElementById('medalsList').innerHTML = state.medals.map(m => `<span class="medalha">${m}</span>`).join('');
}

window.onload = load;
</script>
</body>
</html>
