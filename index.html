<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-mobile-web-app-title" content="MZK ELITE">
<title>MZK GAME LIFE 2026 - ELITE</title>

<style>
:root {
    --primary: #ff2b2b;
    --bg: #0a0a0a;
    --card-bg: linear-gradient(145deg, #1a0000, #250000);
    --gold: #ffd700;
    --hardcore: #ff0055;
}
* { -webkit-tap-highlight-color: transparent; box-sizing: border-box; }
body {
    margin: 0;
    padding: env(safe-area-inset-top) 15px env(safe-area-inset-bottom) 15px;
    background: var(--bg);
    color: #fff;
    font-family: -apple-system, system-ui, sans-serif;
    overflow-x: hidden;
}

/* Anima√ß√£o de Level Up */
@keyframes levelUpPulse {
    0% { transform: scale(1); box-shadow: 0 0 0px var(--gold); }
    50% { transform: scale(1.1); box-shadow: 0 0 30px var(--gold); }
    100% { transform: scale(1); box-shadow: 0 0 0px var(--gold); }
}
.level-up-anim { animation: levelUpPulse 0.8s ease-in-out; }

#app { max-width: 500px; margin: 0 auto; padding-bottom: 40px; position: relative; }
.banner-img { width: 100%; border-radius: 15px; border: 1px solid var(--primary); box-shadow: 0 0 20px rgba(255, 43, 43, 0.3); margin: 15px 0; }
h1 { font-size: 1.1rem; text-align: center; letter-spacing: 2px; color: var(--primary); text-transform: uppercase; margin: 5px 0; }

.header-stats { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; }
.rank-badge { background: #333; color: #fff; padding: 4px 12px; border-radius: 6px; font-size: 0.7rem; font-weight: bold; border: 1px solid var(--primary); }

.level-card { background: var(--card-bg); border-radius: 12px; padding: 20px; text-align: center; border: 1px solid #330000; margin-bottom: 15px; transition: 0.3s; }
.xp-label { font-size: 1.4rem; font-weight: 900; color: var(--primary); text-shadow: 0 0 10px rgba(255,43,43,0.3); }

.task-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 15px; }
.card { background: var(--card-bg); padding: 15px; border-radius: 12px; border: 1px solid #330000; }
.full-card { grid-column: span 2; }

button { background: var(--primary); color: white; border: none; padding: 12px 5px; border-radius: 8px; font-weight: bold; font-size: 0.8rem; width: 100%; transition: 0.1s; }
button:active { transform: scale(0.95); }
button:disabled { background: #222; color: #555; }

.bar-bg { background: #220000; height: 12px; border-radius: 6px; margin-top: 10px; overflow: hidden; border: 1px solid #400; }
.bar-fill { height: 100%; background: var(--primary); width: 0%; transition: width 0.6s cubic-bezier(0.34, 1.56, 0.64, 1); }

/* Conquistas Estilizadas */
.medal-container { display: flex; flex-wrap: wrap; gap: 8px; justify-content: center; }
.medalha { 
    background: linear-gradient(135deg, #444, #222); 
    color: #eee; padding: 6px 10px; border-radius: 6px; 
    font-size: 0.65rem; font-weight: bold; border: 1px solid #555;
    display: flex; align-items: center; gap: 5px;
}
.medalha.active { background: linear-gradient(135deg, var(--primary), #800); border-color: var(--gold); color: white; }

/* Part√≠culas */
#particles-canvas { position: fixed; top: 0; left: 0; pointer-events: none; z-index: 999; }
</style>
</head>
<body onclick="initAudio()">

<canvas id="particles-canvas"></canvas>

<div id="app">
    <img src="mzk_banner.png" alt="MZK LOGO" class="banner-img">
    
    <div class="header-stats">
        <div id="rankBadge" class="rank-badge">BRONZE</div>
        <div style="font-size: 0.6rem; color: var(--hardcore); font-weight: bold;">MODO HARDCORE ATIVO</div>
    </div>

    <div class="level-card" id="mainLevelCard">
        <div class="xp-label" id="levelTxt">LVL 1</div>
        <div class="bar-bg"><div id="xpBarFill" class="bar-fill"></div></div>
        <div id="motivation-text" style="font-size:0.75rem; margin-top:10px; color:#aaa;">Inicie sua jornada...</div>
    </div>

    <div id="boss-container" style="display:none; background: #200; border: 2px solid var(--primary); padding: 15px; border-radius: 12px; margin-bottom: 15px; text-align: center;">
        <h2 style="color:var(--primary); margin:0; font-size:0.9rem;">BOSS: O SEDENTO üëæ</h2>
        <button onclick="addWater(1000)" style="margin-top:10px; background:var(--gold); color:#000">ATAQUE CR√çTICO üíß</button>
    </div>

    <div class="card full-card">
        <h3>üíß Hidrata√ß√£o <span id="waterVal" style="float:right">0/3000ml</span></h3>
        <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 8px;">
            <button onclick="addWater(250)">+250</button>
            <button onclick="addWater(500)">+500</button>
            <button onclick="addWater(1000)">+1L</button>
        </div>
        <div class="bar-bg"><div id="waterBarFill" class="bar-fill" style="background: #0088ff; box-shadow: 0 0 10px #0088ff;"></div></div>
    </div>
    
    <div class="task-grid" id="mainTasks"></div>
    <h3>üçΩÔ∏è Nutri√ß√£o</h3>
    <div class="task-grid" id="mealGrid"></div>
    
    <div class="card full-card">
        <h3>üèÜ Conquistas MZK</h3>
        <div id="medalsList" class="medal-container"></div>
    </div>
</div>

<script>
let audioCtx = null;
let state = { water: 0, xp: 0, lvl: 1, tasks: { gym: false, box: false, meals: {} }, date: new Date().toLocaleDateString(), medals: [], completedCount: 0 };

const ranks = [{lvl:1,n:"BRONZE"}, {lvl:5,n:"PRATA"}, {lvl:10,n:"OURO"}, {lvl:20,n:"PLATINA"}, {lvl:40,n:"DIAMANTE"}, {lvl:70,n:"MESTRE"}, {lvl:100,n:"IMORTAL"}];

const allMedals = [
    {id: "H1", name: "üíß Hidratado", desc: "3L de √°gua no dia"},
    {id: "T1", name: "ü•ä Lutador", desc: "Completou Boxe"},
    {id: "F1", name: "üèãÔ∏è Marombeiro", desc: "Completou Academia"},
    {id: "D1", name: "ü•ó Clean Food", desc: "Todas as refei√ß√µes"},
    {id: "L10", name: "üî• N√≠vel 10", desc: "Chegou ao LVL 10"},
    {id: "S7", name: "üëë Elite", desc: "Chegou ao LVL 50"}
];

function initAudio() { if(!audioCtx) audioCtx = new (window.AudioContext || window.webkitAudioContext)(); }

function playSound(f, t='sine', d=0.1) {
    if(!audioCtx) return;
    const o=audioCtx.createOscillator(); const g=audioCtx.createGain();
    o.connect(g); g.connect(audioCtx.destination);
    o.type=t; o.frequency.value=f; g.gain.value=0.05;
    o.start(); o.stop(audioCtx.currentTime+d);
}

// Sistema de Part√≠culas
function createConfetti() {
    const canvas = document.getElementById('particles-canvas');
    const ctx = canvas.getContext('2d');
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
    let particles = [];
    for(let i=0; i<50; i++) {
        particles.push({
            x: Math.random()*canvas.width, y: canvas.height,
            v: Math.random()*5+2, r: Math.random()*5+2,
            color: `hsl(${Math.random()*360}, 100%, 50%)`,
            dx: Math.random()*4-2
        });
    }
    function anim() {
        ctx.clearRect(0,0,canvas.width, canvas.height);
        particles.forEach(p => {
            p.y -= p.v; p.x += p.dx;
            ctx.fillStyle = p.color;
            ctx.fillRect(p.x, p.y, p.r, p.r);
        });
        if(particles[0].y > -10) requestAnimationFrame(anim);
    }
    anim();
}

function save() { localStorage.setItem('mzk_v5', JSON.stringify(state)); }

function load() {
    const saved = localStorage.getItem('mzk_v5');
    if(saved) {
        const parsed = JSON.parse(saved);
        if(parsed.date !== new Date().toLocaleDateString()) {
            state = {...parsed, water:0, tasks:{gym:false,box:false,meals:{}}, completedCount:0, date:new Date().toLocaleDateString()};
        } else state = parsed;
    }
    render();
}

function addXP(amount) {
    state.xp += amount;
    state.completedCount++;
    playSound(440);
    if(state.xp >= 100) { 
        state.lvl++; state.xp = 0; 
        levelUpEffect();
    }
    checkMedals();
    save(); render();
}

function levelUpEffect() {
    const card = document.getElementById('mainLevelCard');
    card.classList.add('level-up-anim');
    setTimeout(() => card.classList.remove('level-up-anim'), 800);
    createConfetti();
    playSound(523, 'square', 0.2);
    setTimeout(() => playSound(659, 'square', 0.2), 150);
    setTimeout(() => playSound(783, 'square', 0.3), 300);
}

function checkMedals() {
    if(state.water >= 3000 && !state.medals.includes("H1")) state.medals.push("H1");
    if(state.tasks.box && !state.medals.includes("T1")) state.medals.push("T1");
    if(state.tasks.gym && !state.medals.includes("F1")) state.medals.push("F1");
    if(Object.keys(state.tasks.meals).length >= 4 && !state.medals.includes("D1")) state.medals.push("D1");
    if(state.lvl >= 10 && !state.medals.includes("L10")) state.medals.push("L10");
    if(state.lvl >= 50 && !state.medals.includes("S7")) state.medals.push("S7");
}

function addWater(v) { state.water = Math.min(state.water + v, 3000); addXP(5); }

function toggleTask(key, isMeal = false) {
    if(isMeal) { if(!state.tasks.meals[key]) { state.tasks.meals[key]=true; addXP(10); } }
    else { if(!state.tasks[key]) { state.tasks[key]=true; addXP(30); } }
}

function render() {
    const currentRank = [...ranks].reverse().find(r => state.lvl >= r.lvl);
    document.getElementById('rankBadge').innerText = currentRank.n;
    document.getElementById('levelTxt').innerText = `LVL ${state.lvl}`;
    document.getElementById('xpBarFill').style.width = `${state.xp}%`;
    document.getElementById('waterVal').innerText = `${state.water}/3000ml`;
    document.getElementById('waterBarFill').style.width = `${(state.water/3000)*100}%`;

    const hour = new Date().getHours();
    document.getElementById('boss-container').style.display = (hour >= 20 && state.water < 2000) ? 'block' : 'none';

    const d = new Date().getDay();
    const isBoxe = [1,3,5].includes(d);
    document.getElementById('mainTasks').innerHTML = `
        <div class="card"><h3>${isBoxe?'ü•ä Boxe':'üèãÔ∏è Academia'}</h3><button onclick="toggleTask('${isBoxe?'box':'gym'}')" ${ (state.tasks.box || state.tasks.gym) ? 'disabled' : ''}>${(state.tasks.box || state.tasks.gym) ? 'FEITO' : 'TREINAR'}</button></div>
        <div class="card"><h3>üíâ Tirze</h3><button onclick="toggleTask('tirzep')" ${(d !== 5 || state.tasks.tirzep) ? 'disabled' : ''}>${state.tasks.tirzep ? 'OK' : (d===5?'APLICAR':'SEXTA')}</button></div>
    `;
    const mList = ["Caf√©", "Almo√ßo", "Lanche", "Jantar"];
    document.getElementById('mealGrid').innerHTML = mList.map(m => `<div class="card"><h3>${m}</h3><button onclick="toggleTask('${m}', true)" ${state.tasks.meals[m] ? 'disabled' : ''}>${state.tasks.meals[m] ? 'OK' : 'FEITO'}</button></div>`).join('');
    
    document.getElementById('medalsList').innerHTML = allMedals.map(m => `
        <div class="medalha ${state.medals.includes(m.id) ? 'active' : ''}">
            ${m.name}
        </div>
    `).join('');
}

window.onload = load;
</script>
</body>
</html>
